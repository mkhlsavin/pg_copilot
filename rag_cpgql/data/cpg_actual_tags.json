{
  "version": "1.0",
  "source": "pg17_full.cpg",
  "extracted": "2025-10-17",
  "description": "Actual tag values present in PostgreSQL 17 CPG, extracted via Joern queries",

  "tag_categories": {
    "function-purpose": {
      "description": "Functional categorization of methods",
      "values": [
        "general",
        "statistics",
        "utilities",
        "memory-management",
        "parsing",
        "storage-access",
        "wal-logging",
        "concurrency-control",
        "catalog-access",
        "error-handling",
        "networking",
        "type-system",
        "transaction-control",
        "query-execution",
        "query-planning"
      ],
      "count": 15
    },

    "domain-concept": {
      "description": "PostgreSQL domain-specific concepts",
      "values": [
        "vacuum",
        "parallelism",
        "extension",
        "replication",
        "mvcc",
        "partitioning",
        "foreign-data",
        "jit"
      ],
      "count": 8
    },

    "data-structure": {
      "description": "Data structures used in implementation",
      "values": [
        "array",
        "relation",
        "bitmap",
        "hash-table",
        "buffer",
        "linked-list",
        "binary-tree",
        "queue"
      ],
      "count": 8
    },

    "Feature": {
      "description": "Specific PostgreSQL features (verbose names)",
      "sample_values": [
        "Parallelized CREATE INDEX for BRIN indexes",
        "Block-range (BRIN) indexes",
        "UNIQUE NULLS NOT DISTINCT",
        "Visibility Map for Vacuuming",
        "Parallel query execution on remote databases"
      ],
      "note": "Features have full descriptive names, not short codes"
    },

    "Other tags": [
      "cyclomatic-complexity",
      "lines-of-code",
      "code-smell",
      "refactor-priority",
      "test-coverage",
      "test-count",
      "perf-hotspot",
      "loop-depth",
      "allocation-heavy",
      "io-bound",
      "expensive-op",
      "algorithm-class",
      "api-caller-count",
      "api-typical-usage",
      "api-example",
      "api-public"
    ]
  },

  "common_mismatches": {
    "transaction-management": "transaction-control",
    "logging": "wal-logging or error-handling",
    "snapshot-isolation": "mvcc",
    "locking": "concurrency-control",
    "snapshot": "NOT IN data-structure (use mvcc in domain-concept)",
    "tuple": "NOT IN data-structure (use relation)",
    "heap-tuple": "NOT IN data-structure",
    "MVCC": "NOT IN Feature (too generic, use mvcc in domain-concept)"
  },

  "recommendations": {
    "use_exact_values": "EnrichmentAgent must map to EXACT tag values from CPG",
    "avoid_invention": "Do not generate tag values that don't exist in CPG",
    "feature_matching": "For Feature tags, use fuzzy matching or skip (too specific)",
    "fallback_order": [
      "1. Use domain-concept for broad concepts (mvcc, replication, vacuum)",
      "2. Use function-purpose for functional categorization",
      "3. Use data-structure for implementation structures",
      "4. Skip Feature tags (too specific for generation)"
    ]
  }
}
